services:
  llvm-python:
    build:
      context: ./llvm-python
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: ubuntu:24.04
        LLVM_VERSION: ${LLVM_VERSION:-20}
    image: tomkarolyshyn/llvm-python:3.12-${LLVM_VERSION}

  rtl-sim:
    build:
      context: ./rtl-sim
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: ubuntu:24.04
        VERILATOR_REV: ${VERILATOR_REV}
    image: tomkarolyshyn/rtl-sim:${VERILATOR_REV}
    container_name: rtl_sim

  vitis:
    build:
      context: ./vitis
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: ubuntu:24.04
        VIVADO_DIR: Xilinx_2025.1
    environment:
      - DISPLAY=${DISPLAY}
      - SSH_AUTH_SOCK=/ssh-agent
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix #x11
      - $SSH_AUTH_SOCK:/ssh-agent
    image: vitis:2025.1
    network_mode: host # Optional: Only for Linux
    stdin_open: true
    tty: true
    container_name: vitis
