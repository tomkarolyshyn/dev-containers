version: '3.8'

services:
  llvm-python:
    build:
      context: ./llvm-python
      dockerfile: Dockerfile
      args:
        LLVM_VERSION: 20
    image: llvm-python:latest

  fpga-sim:
    build:
      context: ./fpga-sim
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: python:3.12-slim
        # BASE_IMAGE: ubuntu:24.04
        # LLVM_VERSION: 20
        VERILATOR_REV: v5.036
    image: fpga-sim:latest
    container_name: fpga_sim

  vitis:
    build:
      context: ./vitis
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: ubuntu:24.04
        VITIS_VERSION: 2025.1
    environment:
      - DISPLAY=${DISPLAY}
      - SSH_AUTH_SOCK=/ssh-agent
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix #x11
      - $SSH_AUTH_SOCK:/ssh-agent
    image: vitis:2025.1
    network_mode: host  # Optional: Only for Linux
    stdin_open: true
    tty: true
    container_name: vitis
